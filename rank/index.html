<!DOCTYPE html>
<html>
	<head>
		<title>268排行榜</title>
		<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
		<style>
			thead {
			}
			tr {
			}
			td {
			}
			.user {
			}
			.id {
			}
			.score {
			}
			.admin {
				background-color: purple;
				color: white;
				border-radius: 4px;
				margin-left: 4px;
			}
		</style>
		<script>
			function getcolor(usr,score){return usr.length==2?'purple':score>=80?'red':score>=60?'orange':score>=45?'green':score>=30?'blue':'gray';}
			function addrnk(user,id,score){var usr=user.split('.');document.getElementById('rank').innerHTML+='<tr><td style="color:'+getcolor(usr,score)+'" class="user">'+(usr.length==1?user:usr[0]+'<span class="admin">&nbsp;'+usr[1]+'&nbsp;</span>')+'</td><td class="id">'+id+'</td><td class="score">'+score+'</score></tr>';}
			function gentable(e){e.sort(function(a,b){return a['score']!=b['score']?(a['score']<b['score']?1:-1):0});for(var i in e) addrnk(e[i]['user'],e[i]['id'],e[i]['score']);}
			window.onload=function(){
				$.ajax({
					url: "./rank.json",
					type: "GET",
					dataType: "json",
					success: function(e){gentable(e);}
				});
				//现在rank.json是修改过用来测试的，回头用initrank.cpp改回去 
				//排序，按照score从大到小， 相等的按id从小到大
				//然后依次添加到addrnk中
				//getcolor需要改一下，如果数据中形如"a.b"，则代表紫名，标识为b
				//否则按照score来分用户名颜色
				//css里的那些东西要写一下样式
				//gentable函数排序并显示排行榜，传入的是数组 
			}
		</script>
	</head>
	<body>
		<table>
			<thead>
				<td>用户名</td>
				<td>学号</td>
				<td>咕值</td>
			</thead>
			<tbody id="rank"></tbody>
		</table>
	</body>
</html>
